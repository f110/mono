(globalThis.webpackChunkReviewStack=globalThis.webpackChunkReviewStack||[]).push([[334],{2334:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>x});var o=i(7878),n=i(5083),r=i(8096),s=i(742),a=i(7823),c=i(1527);const h={opacity:.5,transition:"opacity 200ms cubic-bezier(0.08,0.52,0.52,1)",":hover":{opacity:1}};function l(){const e="day"===(0,s.useRecoilValue)(c.x)?"/meta_opensource_logo.svg":"/meta_opensource_logo_negative.svg";return(0,o.jsx)(n.Z,{as:"footer",backgroundColor:"canvas.subtle",paddingTop:4,position:"fixed",bottom:0,width:"100%",children:(0,o.jsxs)(n.Z,{margin:"auto",width:800,paddingTop:2,children:[(0,o.jsxs)(n.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,o.jsxs)(n.Z,{children:[(0,o.jsx)(u,{text:"Project Links"}),[{text:"GitHub Repository",href:"https://github.com/facebook/sapling/tree/main/addons/reviewstack"},{text:"Sapling SCM",href:"https://sapling-scm.com"},{text:"Meta Open Source",href:"https://opensource.fb.com"}].map((e=>(0,o.jsx)(d,{...e},e.href)))]}),(0,o.jsxs)(n.Z,{children:[(0,o.jsx)(u,{text:"Legal"}),[{text:"Meta Open Source - Privacy Policy",href:"https://opensource.fb.com/legal/privacy"},{text:"Meta Open Source - Terms of Use",href:"https://opensource.fb.com/legal/terms"},{text:"GitHub Privacy Statement",href:"https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement"},{text:"GitHub Terms of Service",href:"https://docs.github.com/en/site-policy/github-terms/github-terms-of-service"},{text:"Netlify Privacy Policy",href:"https://www.netlify.com/privacy/"}].map((e=>(0,o.jsx)(d,{...e},e.href)))]})]}),(0,o.jsx)(n.Z,{textAlign:"center",children:(0,o.jsx)(r.Z,{sx:h,children:(0,o.jsx)("a",{href:"https://opensource.fb.com",target:"_blank",children:(0,o.jsx)("img",{src:e,width:"480px",alt:"Meta Open Source Logo"})})})})]})})}function u(e){let{text:t}=e;return(0,o.jsx)(n.Z,{paddingBottom:1,children:(0,o.jsx)(r.Z,{fontWeight:"bold",children:t})})}function d(e){let{text:t,href:i}=e;return(0,o.jsx)(n.Z,{children:(0,o.jsx)(a.Z,{href:i,children:t})})}var p=i(7158),f=i(5707),g=i(5438),v=i.n(g),b=i(1024),w=i(9404);const m=["user","repo"].join(" ");function x(e){let{setToken:t}=e;const[i,s]=(0,b.useState)(!1),[c,h]=(0,b.useState)(null),u=(0,b.useCallback)((async()=>{s(!0);try{const e=await new Promise(((e,t)=>{new(v())({}).authenticate({provider:"github",scope:m},((i,o)=>{if(i)t(i);else{const i=null===o||void 0===o?void 0:o.token;"string"===typeof i?e(i):t(new Error("token missing in OAuth response"))}}))}));t(e)}catch(e){const t=e instanceof Error?e.message:"error fetching OAuth token";h(t)}s(!1)}),[s,h,t]);return(0,o.jsxs)(n.Z,{children:[(0,o.jsx)(w.Z,{orgAndRepo:null}),(0,o.jsxs)(n.Z,{margin:"auto",width:800,paddingTop:2,children:[(0,o.jsxs)(n.Z,{pb:2,children:[(0,o.jsx)(p.Z,{children:"Welcome to ReviewStack"}),(0,o.jsxs)(r.Z,{as:"p",pb:2,children:[(0,o.jsx)(a.Z,{href:"https://sapling-scm.com/docs/addons/reviewstack",children:"ReviewStack"})," is a novel user interface for GitHub pull requests with custom support for"," ",(0,o.jsx)(r.Z,{fontStyle:"italic",children:"stacked changes"}),". For tools like"," ",(0,o.jsx)(a.Z,{href:"http://sapling-scm.com/",children:"Sapling"})," or"," ",(0,o.jsx)(a.Z,{href:"https://github.com/ezyang/ghstack",children:"ghstack"})," that create separate pull requests for independent commits in a stack, ReviewStack facilitates navigating the stack and ensuring that only the code that was meant to be considered for review is displayed for each pull request."]}),(0,o.jsxs)(r.Z,{as:"p",pb:2,children:["ReviewStack is owned and operated by Meta Platforms, Inc. Note that"," ",(0,o.jsx)(a.Z,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/authorizing-oauth-apps",children:"you must authorize ReviewStack to access your GitHub data"})," ","in order to use ReviewStack. Once authorized, ReviewStack will store your GitHub access token, and other data fetched from GitHub, locally in the browser. Clicking"," ",(0,o.jsx)(r.Z,{fontWeight:"bold",children:"Logout"})," will remove the data that is stored locally, but it will not delete your data from GitHub."]})]}),null!=c?(0,o.jsx)(n.Z,{pb:2,children:(0,o.jsx)(r.Z,{color:"danger.fg",children:c})}):null,(0,o.jsx)(n.Z,{children:(0,o.jsx)(f.zx,{onClick:u,disabled:i,children:"Authorize ReviewStack to access GitHub"})})]}),(0,o.jsx)(l,{})]})}},5438:function(e,t){var i,o,n;o=[t],i=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o="https://api.netlify.com",n=function(){function e(i){t(this,e),this.err=i}return i(e,[{key:"toString",value:function(){return this.err&&this.err.message}}]),e}(),r={github:{width:960,height:600},gitlab:{width:960,height:600},bitbucket:{width:960,height:500},email:{width:500,height:400}},s=function(){function e(i){t(this,e),this.site_id=i.site_id,this.base_url=i.base_url||o}return i(e,[{key:"handshakeCallback",value:function(e,t){var i=this;return function o(n){if(n.data==="authorizing:"+e.provider&&n.origin===i.base_url)return window.removeEventListener("message",o,!1),window.addEventListener("message",i.authorizeCallback(e,t),!1),i.authWindow.postMessage(n.data,n.origin)}}},{key:"authorizeCallback",value:function(e,t){var i=this;return function o(r){var s,a;r.origin===i.base_url&&(0===r.data.indexOf("authorization:"+e.provider+":success:")&&(s=JSON.parse(r.data.match(new RegExp("^authorization:"+e.provider+":success:(.+)$"))[1]),window.removeEventListener("message",o,!1),i.authWindow.close(),t(null,s)),0===r.data.indexOf("authorization:"+e.provider+":error:")&&(a=JSON.parse(r.data.match(new RegExp("^authorization:"+e.provider+":error:(.+)$"))[1]),window.removeEventListener("message",o,!1),i.authWindow.close(),t(new n(a))))}}},{key:"getSiteID",value:function(){if(this.site_id)return this.site_id;var e=document.location.host.split(":")[0];return"localhost"===e?null:e}},{key:"authenticate",value:function(e,t){var i,o,s,a=this.getSiteID(),c=e.provider;if(!c)return t(new n({message:"You must specify a provider when calling netlify.authenticate"}));if(!a)return t(new n({message:'You must set a site_id with netlify.configure({site_id: "your-site-id"}) to make authentication work from localhost'}));var h=r[c]||r.github;i=screen.width/2-h.width/2,o=screen.height/2-h.height/2,window.addEventListener("message",this.handshakeCallback(e,t),!1),s=this.base_url+"/auth?provider="+e.provider+"&site_id="+a,e.scope&&(s+="&scope="+e.scope),!0===e.login&&(s+="&login=true"),e.beta_invite&&(s+="&beta_invite="+e.beta_invite),e.invite_code&&(s+="&invite_code="+e.invite_code),this.authWindow=window.open(s,"Netlify Authorization","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+h.width+", height="+h.height+", top="+o+", left="+i+");"),this.authWindow.focus()}}]),e}();e.default=s},void 0===(n="function"===typeof i?i.apply(t,o):i)||(e.exports=n)}}]);
//# sourceMappingURL=334.abc0db59.chunk.js.map